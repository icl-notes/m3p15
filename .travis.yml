dist: xenial
language: minimal

git:
  quiet: true
  submodules: false

branches:
  only:
  - master
  - deploy

env:
# Carefull, also set it in the deploy section!
- NOTES_FILE=main

services:
- docker

script:
- docker run --rm -v $(pwd):/notes blang/latex /bin/bash -c "cd /notes; ./build.sh $NOTES_FILE"
- "./test.sh $NOTES_FILE"

deploy:
  provider: releases
  api_key:
    secure: qwqME3Xyl5Ik/ZuHA/AG8flKZpK689SBzn9XQGuZMfVvCClw+r4WDYHlGCq+deHQ4KKc/amQx/I4gLDPK7d3xonyTsFUekurQ97Zl9RYhC90H/NgdeMduEhY5BusiHhvBLlsJLJcsTKcNGrJMSTSCS7NhZd+tJnCoVoKSPlmA89Zpk9ts4x88FQTOanvyH6P01W7ZIQMvjf65+UEzyKkBg0Hw4gFK8cFC7Q8H1/IhiDRnPOMYwtoiwv4mFrW7aDC7AxQs3X+2qQoBi0uexzH0345v/pgNpsCGIMq43VdWU1wiOcSp6d74KaZBFG8XdSzgbGlPNICnjO1veJma05g9a61eIJML1uR7ARwFGqmvg3jregZKyGtHzHXArygHT5epMa349Vqlgorb/c4bxHtv2uVtRjSbpfQVtBH3sTYJBdQn2FlPUqiMmX7NqT8Q+KTsrJPMPxuvQQE2XXBa/SBOc/9zhZe2y8swSd2qpe8nSqNZX9WHTylwTdRAbwOkQ/7eOPHOnzvteBFL5Qt5lbYxpNz0jXXAgoHTDCLg0D2paM/JE1sC9ndYks4KUr0TPz+CexX5hvPoxBpvJPgBdN1XWk61jM22z17o+6eqPi6bga9DF8rf5Loai2TUsai188O2gPt6RLigKkbiPo0GtaEVwuJmeLHiIPirn7mfaEFzQA=
  file: main.pdf
  skip_cleanup: true
  on:
    repo: icl-notes/m3p15
